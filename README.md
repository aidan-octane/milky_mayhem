# milky_mayhem
A system that will psychologically torture my roommate based off of his milk usage.

My roommate drinks milk. Way too much of it. Oftentimes, a gallon in TWO DAYS. That's just criminal.
He also likes to play tricks on me. He likes to deliver secret messages and little codes. I would call it psychological torture - he's thorough enough to where, every time anybody says something weird to me, my first thought is...did my roommate get them to say that to me as part of some code?

So, this device will detect how much milk he drinks (by using IR sensors sticking out of a yogurt container next to the milk), publically shame him on a Twitter account (@waytoomuchmilk), and also use a Raspberry Pi (which is hosting the databases and server connections) to deliver HIM a secret encoded message. Every night, at midnight, a creepy message & song plays out of mysterious speakers in a box next to his room, followed by a number repeated in the SAM voice (the first computer-generated voice simulation - you've heard it). It's scary, and it is going to make him believe that I am delivering him a secret code. This will drive him crazy as he tries to figure out what the code means. Little does he know that each number in the 'code' is just how many glasses of milk he's had that day. 

This is being made as part of a YouTube video, where there is far more information on the silly stuff. However, this is how it works in a more technical sense: 

This project was completely designed end-to-end by me, and while it seems pretty simple, a lot of little engineering problems made it a huge pain. It was made mostly in one week, but hardware issues, waiting on parts delivery, etc. extended it by months. 
Basically, the system consists of the sensor connected to a battery-powered ESP-32 inside of the yogurt container communicating via HTTP protocol to a Raspberry Pi. Hosted on the Pi is the database that stores all the milk incidents (and more, such as daily and total counters) and hosts the Flask webserver that the ESP communicates with.
The Pi is configured to run multiple programs on startup - the Flask server that also adds to the database and a multithreaded program that constantly checks for updates to the database - that together work to deliver the code at midnight and tweet out an accurate depiction of the milk that is being drunk. Overall, it's fairly simple programatically, though there were a lot of fun issues to work through in the software that made it a little harder and a lot of stressful edge cases to account for.

The bane of this project was the limitations with the hardware and the actual problem at hand - How do you disguise this entire system directly under your roommate's nose? The literal only way that I can think of to do this was to place an IR sensor directly next to the milk, so the entire project relies on the fact that he Probably Won't Notice That. I experimented with capacitive touch sensors but they were too unreliable to produce a steady result, and something like a pressure pad would be easily noticeable given that the fridge has clear plastic shelves. Besides this, there were other problems that I just can't solve. For instance, the first time I put the device in, it short-circuited almost immediately, and I still cannot figure out why. My leading theory is the condensation in the fridge, but it's been in the fridge for longer and has yet to short circuit, so I can only hope that it won't. It's also very hard to work in the fridge with the risk of him walking out at any moment, but I did manage to test the sensor fairly thoroughly to make sure it was accurate enough. 

The bigger issue is the fact that my stupid roommate is a genius. After it short circuited, I left the speaker system (the 'code transmitter') in the living room because I was upset and didn't think it'd be a big deal. However, he noticed immediately, and in the 50-minute span that I left the house to go to class, he hacked into it (without ever touching the device), saw half my files, and then proceeded to play ME a code through MY OWN CODE TRANSMITTING DEVICE, launching my apartment into a full psychological warfare. I think I managed to get him off my trail by waiting a lengthy period of time (a.k.a procrastinating because I'm so nervous things are going to fall apart again) and rebuilding it exactly the same with no changes whatsoever. This time, I'm going to wait a bit to relaunch the 'secret code' half of the project, because I want to track his milk usage as best as I can for at least a week. Without being on edge from my mysterious speaker device being back in the living room, I'm hoping that he also won't be on the lookout for suspicious yogurt containers next to the milk. 
